<?xml version="1.0" encoding="UTF-8"?>
<marketing:MarketingStudioPluginBase
        xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns="exml:ext.config"
        xmlns:exml="http://www.jangaroo.net/exml/0.8"
        xmlns:editor="exml:com.coremedia.cms.editor.sdk.config"
        xmlns:ui="exml:com.coremedia.ui.config"
        xmlns:bpforms="exml:com.coremedia.blueprint.studio.config"
        xmlns:marketing="com.coremedia.blueprint.marketing.*">
  <fx:Script><![CDATA[
    import com.coremedia.blueprint.marketing.beans.MarketingImpl;
    import com.coremedia.blueprint.marketing.beans.MarketingsImpl;
    import com.coremedia.blueprint.marketing.beans.NewsletterImpl;

    import mx.resources.ResourceManager;

    private var config:MarketingStudioPlugin;

    public native function MarketingStudioPlugin(config:MarketingStudioPlugin = null);
    ]]></fx:Script>

  <marketing:rules>

    <bpforms:CMChannelForm>
      <bpforms:plugins exml:mode="append">
        <ui:AddItemsPlugin index="3">
          <ui:items>
            <marketing:MarketingForm/>
          </ui:items>
        </ui:AddItemsPlugin>
      </bpforms:plugins>
    </bpforms:CMChannelForm>

  </marketing:rules>

  <marketing:configuration>

    <editor:CopyResourceBundleProperties
            destination="{ResourceManager.getInstance().getResourceBundle(null, 'com.coremedia.cms.editor.ContentTypes')}"
            source="{ResourceManager.getInstance().getResourceBundle(null, 'com.coremedia.blueprint.marketing.MarketingStudioPlugin')}"/>

    <editor:RegisterRestResource beanClass="{NewsletterImpl}"/>
    <editor:RegisterRestResource beanClass="{MarketingsImpl}"/>
    <editor:RegisterRestResource beanClass="{MarketingImpl}"/>

  </marketing:configuration>

</marketing:MarketingStudioPluginBase>
